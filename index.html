<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Tic Tac Toe</title>
  <link type="text/css" rel="stylesheet" href="style.css">
  <script src="main.js"></script>
</head>

<body>
  <h2>Tic Tac Toe</h2>
  <div class="board" style="font-size: 130px">
    <div id="row-1">
      <div id="cell-0" class="cell"></div>
      <div id="cell-1" class="cell"></div>
      <div id="cell-2" class="cell"></div>
    </div>
    <div id="row-2">
      <div id="cell-3" class="cell"></div>
      <div id="cell-4" class="cell"></div>
      <div id="cell-5" class="cell"></div>
    </div>
    <div id="row-3">
      <div id="cell-6" class="cell"></div>
      <div id="cell-7" class="cell"></div>
      <div id="cell-8" class="cell"></div>
    </div>
  </div>
  <script>

class Square { 
  constructor (id, row, column){
    this.id = id;
    this.row = row;
    this.column = column;
  }
}
const square0 = new Square('cell-0', 1, 1)
const square1 = new Square('cell-1', 1, 2)
const square2 = new Square('cell-2', 1, 3)
const square3 = new Square('cell-3', 2, 1)
const square4 = new Square('cell-4', 2, 2)
const square5 = new Square('cell-5', 2, 3)
const square6 = new Square('cell-6', 3, 1)
const square7 = new Square('cell-7', 3, 2)
const square8 = new Square('cell-8', 3, 3)

const board = [square0, square1, square2, square3, square4, square5, square6, square7, square8];
let isPlayerX = true;

clickCell();

// determines which cell was clicked and calls addXO
function clickCell(){
  let cells = document.getElementsByClassName("cell");
  for (let cell of cells){
    cell.addEventListener('click', function(){addXO(cell)}, {once:true});
  };
};

// adds X or O to board depending on Player 1 or 2
function addXO(cell){
  console.log(cell.id)
  if (isPlayerX){
    cell.innerHTML = "X";      
  } else {
    cell.innerHTML = "O";
  }
  for (let square of board){
    if (square.id === cell.id){
      square.player = cell.innerHTML;
    }
  }  
  if(isPlayerX){
    player = "X"
  } else {
    player = "O"
  };
  if(winCondition(player) === true){
    alert(`Player ${player} Wins!!!`)

  }
    // stop program
    // clear board
  
  isPlayerX = !isPlayerX;
  return;
};

// function for full board and !winCondition, then DRAW/ tie game.


// needs to be refactored but works for every win condition!
function winCondition(player){
  for (let rowIndex = 1; rowIndex < 4; rowIndex++){
    let rowArray = board.filter(square => square.row === rowIndex && square.player === player);
    if (rowArray.length === 3) {
      return true;
    }
  }

  for (let columnIndex = 1; columnIndex < 4; columnIndex++){
    let columnArray = board.filter(square => square.column === columnIndex && square.player === player);
    if (columnArray.length === 3) {
      return true;
    }
  }
  
  let diagonalArray = board.filter(square => (square.id === 'cell-0' || square.id === 'cell-4' || square.id === 'cell-8') && (square.player === player));

  let diagonalArray2 = board.filter(square => (square.id === 'cell-2' || square.id === 'cell-4' || square.id === 'cell-6') && (square.player === player));

  if(diagonalArray.length === 3 || diagonalArray2.length === 3){
    return true;
  }
};


</script>
</body>

</html>